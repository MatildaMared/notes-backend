var k=Object.defineProperty,C=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var S=(e,t,o)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))L.call(t,o)&&S(e,o,t[o]);if(N)for(var o of N(t))M.call(t,o)&&S(e,o,t[o]);return e},b=(e,t)=>C(e,I(t));import{a as h,j as w,r as u,R as D}from"./vendor.01020ac8.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};E();const g="/api/notes",R=()=>h.get(g).then(t=>t.data),$=e=>h.post(g,e).then(o=>o.data),F=(e,t)=>h.put(`${g}/${e}`,t).then(i=>i.data);var y={getAll:R,create:$,update:F};const c=w.exports.jsx,d=w.exports.jsxs,P=({note:e,toggleImportance:t})=>{const o=e.important?"make not important":"make important";return d("li",{className:"note",children:[e.content,c("button",{onClick:t,children:o})]})},T=({message:e})=>e===null?null:c("div",{className:"error",children:e}),U=()=>d("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[c("br",{}),c("em",{children:"Note app, Department of Computer Science, University of Helsinki 2021"})]}),z=()=>{const[e,t]=u.exports.useState([]),[o,i]=u.exports.useState("a new note..."),[n,s]=u.exports.useState(!0),[a,v]=u.exports.useState(null);u.exports.useEffect(()=>{y.getAll().then(r=>{t(r)})},[]);const j=r=>{const l=e.find(p=>p.id===r),m=b(x({},l),{important:!l.important});y.update(r,m).then(p=>{t(e.map(f=>f.id!==r?f:p))}).catch(p=>{v(`Note '${l.content}' was already removed from server`),setTimeout(()=>{v(null)},5e3),t(e.filter(f=>f.id!==r))})},O=r=>{r.preventDefault();const l={content:o,date:new Date().toISOString(),important:Math.random()<.5};y.create(l).then(m=>{t(e.concat(m)),i("")})},q=r=>{i(r.target.value)},A=n?e:e.filter(r=>r.important);return d("div",{children:[c("h1",{children:"Notes"}),c(T,{message:a}),c("div",{children:d("button",{onClick:()=>s(!n),children:["show ",n?"important":"all"]})}),c("ul",{children:A.map(r=>c(P,{note:r,toggleImportance:()=>j(r.id)},r.id))}),d("form",{onSubmit:O,children:[c("input",{type:"text",value:o,onChange:q}),c("button",{type:"submit",children:"Save"})]}),c(U,{})]})};D.render(c(z,{}),document.getElementById("root"));
